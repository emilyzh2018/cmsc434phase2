<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=640, initial-scale=1.0" />
  <title>Health Tracking</title>
  <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet" />
  <link rel="stylesheet" href="healthTracker.css" />
</head>
<body>
  <div class="device">
    <div class="main-content" id="main-content">
      <div id="title-bar">
        <h1>Health Tracking</h1>
      </div>

      <div id="color-block">
        <strong>Workout Routine of the Day</strong>
        <button class="small-btn" id="edit-routine-btn">Edit</button>
        <ul id="routine-list">
         
        </ul>
      </div>

      <div id="daily-tip-box">
        <p><strong>Goals Progress</strong> <button class="small-btn">+</button></p>
        <label>Workout 5x/week</label>
        <progress value="60" max="100"></progress>
        <label>Run 1 mile</label>
        <progress value="80" max="100"></progress>
      </div>

      <div class="button-row">
        <div class="button-with-plus">
          <button class="gallery-item" id="open-pr-modal">Workout Personal Records</button>
          <button class="add-btn-large" id="add-pr-btn">+</button>
        </div>
        <button class="gallery-item" id="open-trends-modal">Trends</button>
      </div>
    </div>

    <div class="modal" id="pr-modal">
      <div class="modal-content">
        <span class="close-btn" id="close-pr-modal">×</span>
        <h3>Workout Personal Records</h3>
        <div class="gallery-content" id="pr-gallery">
          <div class="gallery-item">Bicep Curl<br><strong>20 lbs</strong></div>
          <div class="gallery-item">Pull Ups<br><strong>5</strong></div>
          <div class="gallery-item">Deadlift<br><strong>140 lbs</strong></div>
        </div>
      </div>
    </div>

    <div class="modal" id="trends-modal">
      <div class="modal-content">
        <span class="close-btn" id="close-trends-modal">×</span>
        <h3>Trends</h3>
        <div class="gallery-content" id="trends-gallery">
          <div class="gallery-item">Mile Pace<br><img src="https://via.placeholder.com/100x50" alt="mile graph" /></div>
          <div class="gallery-item">Steps<br><img src="https://via.placeholder.com/100x50" alt="steps graph" /></div>
        </div>
      </div>
    </div>

    <div class="modal" id="pr-input-modal">
      <div class="modal-content">
        <span class="close-btn" id="close-pr-input-modal">×</span>
        <h3>Add New Personal Record</h3>
        <div class="input-form">
          <input type="text" id="pr-exercise" placeholder="Exercise" />
          <input type="text" id="pr-value" placeholder="Value" />
          <button class="small-btn" id="submit-pr">Submit</button>
        </div>
      </div>
    </div>

    <div class="modal" id="routine-modal">
      <div class="modal-content">
        <span class="close-btn" id="close-routine-modal">×</span>
        <h3>Create/Edit Workout Routine</h3>
        <div class="input-form">
          <input type="text" id="routine-name" placeholder="Routine Name" />
          <div id="current-exercises-list"></div> 
          <button class="small-btn" id="add-exercise-btn">Add Exercise</button>
          <button class="small-btn" id="save-routine-btn">Save Routine</button>
        </div>
        <h3 style="margin-top: 20px;">Past Routines</h3>
        <div id="past-routines">
         
        </div>
      </div>
    </div>

    <div class="modal" id="exercise-input-modal">
      <div class="modal-content">
        <span class="close-btn" id="close-exercise-input-modal">×</span>
        <h3>Add Exercise</h3>
        <div class="input-form">
          <input type="text" id="exercise-name" placeholder="Exercise" />
          <input type="text" id="exercise-sets" placeholder="Sets (e.g., 3 sets)" />
          <button class="small-btn" id="submit-exercise">Submit</button>
        </div>
      </div>
    </div>

    <div class="modal" id="edit-routine-modal">
      <div class="modal-content">
        <span class="close-btn" id="close-edit-routine-modal">×</span>
        <h3>Edit Routine</h3>
        <div class="input-form">
          <input type="text" id="edit-routine-name" placeholder="Routine Name" />
          <h4>Exercises</h4>
          <div id="edit-exercises-list"></div>
          <button class="small-btn" id="edit-add-exercise-btn">Add Exercise</button>
          <button class="small-btn" id="save-edited-routine-btn">Save Changes</button>
          <button class="small-btn apply-btn" id="apply-edited-routine-btn">Apply Routine</button>
        </div>
      </div>
    </div>

    <div class="bottom-nav">
      <div class="nav-item">
        <a href="home.html">
        <img src="images/insight.png" alt="Insight Icon" class="icon" />
        <span class="label">Insights</span>
        </a>
      </div>
      <div class="nav-item">
        <a href="healthTracker.html">
        <img src="images/watch-fitness.png" alt="Fitness Icon" class="icon" />
        <span class="label">Fitness</span>
      </a>
      </div>
      <div class="nav-item active">
        <a href="home.html">
          <img src="images/home.png" alt="Home Icon" class="icon" />
          <span class="label">Home</span>
        </a>
      </div>
      <div class="nav-item">
        <a href="Nutrition_Style.html">
        <img src="images/apple-whole.png" alt="Nutrition Icon" class="icon" />
        <span class="label">Nutrition</span>
        </a>
      </div>
      <div class="nav-item">
        <a href="home.html">
        <img src="images/users-medical.png" alt="Community Icon" class="icon" />
        <span class="label">Community</span>
      </a>
      </div>
    </div>
  </div>

  <script>
    const body = document.body;
    const prModal = document.getElementById("pr-modal");
    const openPR = document.getElementById("open-pr-modal");
    const closePR = document.getElementById("close-pr-modal");
    const trendsModal = document.getElementById("trends-modal");
    const openTrends = document.getElementById("open-trends-modal");
    const closeTrends = document.getElementById("close-trends-modal");
    const prInputModal = document.getElementById("pr-input-modal");
    const addPRBtn = document.getElementById("add-pr-btn");
    const closePRInput = document.getElementById("close-pr-input-modal");
    const submitPR = document.getElementById("submit-pr");
    const prGallery = document.getElementById("pr-gallery");
    const mainContent = document.getElementById('main-content');
    const routineModal = document.getElementById("routine-modal");
    const closeRoutineModal = document.getElementById("close-routine-modal");
    const addExerciseBtn = document.getElementById("add-exercise-btn");
    const saveRoutineBtn = document.getElementById("save-routine-btn");
    const routineNameInput = document.getElementById("routine-name");
    const pastRoutinesDiv = document.getElementById("past-routines");
    const exerciseInputModal = document.getElementById("exercise-input-modal");
    const closeExerciseInputModal = document.getElementById("close-exercise-input-modal");
    const submitExerciseBtn = document.getElementById("submit-exercise");
    const editRoutineBtn = document.getElementById("edit-routine-btn");
    const routineList = document.getElementById("routine-list");
    const editRoutineModal = document.getElementById("edit-routine-modal");
    const closeEditRoutineModal = document.getElementById("close-edit-routine-modal");
    const editRoutineNameInput = document.getElementById("edit-routine-name");
    const editExercisesList = document.getElementById("edit-exercises-list");
    const editAddExerciseBtn = document.getElementById("edit-add-exercise-btn");
    const saveEditedRoutineBtn = document.getElementById("save-edited-routine-btn");
    const applyEditedRoutineBtn = document.getElementById("apply-edited-routine-btn");
    const currentExercisesList = document.getElementById("current-exercises-list");

    function openModal(modal) {
      modal.style.display = "block";
      mainContent.classList.add("dimmed");
    }

    function closeModal(modal) {
      modal.style.display = "none";
      mainContent.classList.remove("dimmed");
    }

    openPR.onclick = () => openModal(prModal);
    closePR.onclick = () => closeModal(prModal);
    openTrends.onclick = () => openModal(trendsModal);
    closeTrends.onclick = () => closeModal(trendsModal);
    addPRBtn.onclick = () => openModal(prInputModal);
    closePRInput.onclick = () => closeModal(prInputModal);

    window.onclick = (event) => {
      if (event.target === prModal) closeModal(prModal);
      if (event.target === trendsModal) closeModal(trendsModal);
      if (event.target === prInputModal) closeModal(prInputModal);
      if (event.target === routineModal) closeModal(routineModal);
      if (event.target === exerciseInputModal) closeModal(exerciseInputModal);
      if (event.target === editRoutineModal) closeModal(editRoutineModal);
    };

    submitPR.onclick = () => {
      const exercise = document.getElementById("pr-exercise").value;
      const value = document.getElementById("pr-value").value;
      if (exercise && value) {
        const newItem = document.createElement("div");
        newItem.className = "gallery-item";
        newItem.innerHTML = `${exercise}<br><strong>${value}</strong>`;
        prGallery.appendChild(newItem);
        document.getElementById("pr-exercise").value = "";
        document.getElementById("pr-value").value = "";
        closeModal(prInputModal);
      }
    };


    let pastRoutines = [
      
    ];
    let currentRoutine = { name: "", exercises: [] };
    let selectedRoutineIndex = null;

    function renderPastRoutines() {
      pastRoutinesDiv.innerHTML = "";
      pastRoutines.forEach((routine, index) => {
        const routineDiv = document.createElement("div");
        routineDiv.className = "past-routine-item";
        routineDiv.innerHTML = `
          <span>${routine.name}</span>
          <button class="small-btn apply-btn" data-index="${index}">select</button>
          <button class="delete-btn" data-index="${index}">Delete</button>
        `;
        pastRoutinesDiv.appendChild(routineDiv);
      });

      document.querySelectorAll(".apply-btn").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const index = e.target.getAttribute("data-index");
          openEditRoutineModal(index);
        });
      });

      document.querySelectorAll(".delete-btn").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const index = e.target.getAttribute("data-index");
          deleteRoutine(index);
        });
      });
    }

    function openEditRoutineModal(index) {
      selectedRoutineIndex = index;
      const routine = pastRoutines[index];
      editRoutineNameInput.value = routine.name;
      renderEditExercises(routine.exercises);
      openModal(editRoutineModal);
    }

    function renderEditExercises(exercises) {
      editExercisesList.innerHTML = "";
      exercises.forEach((ex, idx) => {
        const exerciseDiv = document.createElement("div");
        exerciseDiv.className = "exercise-item";
        exerciseDiv.innerHTML = `
          <span>${ex.exercise} - ${ex.sets}</span>
          <button class="delete-btn" data-exercise-index="${idx}">Delete</button>
        `;
        editExercisesList.appendChild(exerciseDiv);
      });

      document.querySelectorAll("#edit-exercises-list .delete-btn").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const exerciseIndex = e.target.getAttribute("data-exercise-index");
          pastRoutines[selectedRoutineIndex].exercises.splice(exerciseIndex, 1);
          renderEditExercises(pastRoutines[selectedRoutineIndex].exercises);
        });
      });
    }

    function renderCurrentExercises() {
      currentExercisesList.innerHTML = "";
      if (currentRoutine.exercises.length > 0) {
        const exercisesHeader = document.createElement("h4");
        exercisesHeader.textContent = "Exercises";
        currentExercisesList.appendChild(exercisesHeader);

        currentRoutine.exercises.forEach((ex, idx) => {
          const exerciseDiv = document.createElement("div");
          exerciseDiv.className = "exercise-item";
          exerciseDiv.innerHTML = `
            <span>${ex.exercise} - ${ex.sets}</span>
            <button class="delete-btn" data-exercise-index="${idx}">Delete</button>
          `;
          currentExercisesList.appendChild(exerciseDiv);
        });

        document.querySelectorAll("#current-exercises-list .delete-btn").forEach((btn) => {
          btn.addEventListener("click", (e) => {
            const exerciseIndex = e.target.getAttribute("data-exercise-index");
            currentRoutine.exercises.splice(exerciseIndex, 1);
            renderCurrentExercises();
          });
        });
      }
    }

    function applyRoutine(routine) {
      routineList.innerHTML = "";
      routine.exercises.forEach((ex) => {
        const li = document.createElement("li");
        li.innerHTML = `<input type="checkbox" /> ${ex.exercise} - ${ex.sets}`;
        routineList.appendChild(li);
      });
      closeModal(editRoutineModal);
      closeModal(routineModal);
    }

    function deleteRoutine(index) {
      pastRoutines.splice(index, 1);
      renderPastRoutines();
    }

    editRoutineBtn.addEventListener("click", () => {
      openModal(routineModal);
    });

    closeRoutineModal.addEventListener("click", () => {
      closeModal(routineModal);
      currentRoutine = { name: "", exercises: [] };
      routineNameInput.value = "";
      renderCurrentExercises(); 
    });

    addExerciseBtn.addEventListener("click", () => {
      openModal(exerciseInputModal);
    });

    closeExerciseInputModal.addEventListener("click", () => {
      closeModal(exerciseInputModal);
    });

    submitExerciseBtn.addEventListener("click", () => {
      const exercise = document.getElementById("exercise-name").value;
      const sets = document.getElementById("exercise-sets").value;
      if (exercise && sets) {
        currentRoutine.exercises.push({ exercise, sets });
        document.getElementById("exercise-name").value = "";
        document.getElementById("exercise-sets").value = "";
        closeModal(exerciseInputModal);
        renderCurrentExercises(); 
      }
    });

    saveRoutineBtn.addEventListener("click", () => {
      const routineName = routineNameInput.value;
      if (routineName && currentRoutine.exercises.length > 0) {
        pastRoutines.push({ name: routineName, exercises: [...currentRoutine.exercises] });
        currentRoutine = { name: "", exercises: [] };
        routineNameInput.value = "";
        renderCurrentExercises(); 
        renderPastRoutines();
      }
    });

    closeEditRoutineModal.addEventListener("click", () => {
      closeModal(editRoutineModal);
      selectedRoutineIndex = null;
    });

    editAddExerciseBtn.addEventListener("click", () => {
      openModal(exerciseInputModal);
      submitExerciseBtn.onclick = () => {
        const exercise = document.getElementById("exercise-name").value;
        const sets = document.getElementById("exercise-sets").value;
        if (exercise && sets) {
          pastRoutines[selectedRoutineIndex].exercises.push({ exercise, sets });
          renderEditExercises(pastRoutines[selectedRoutineIndex].exercises);
          document.getElementById("exercise-name").value = "";
          document.getElementById("exercise-sets").value = "";
          closeModal(exerciseInputModal);
        }
      };
    });

    saveEditedRoutineBtn.addEventListener("click", () => {
      const newName = editRoutineNameInput.value;
      if (newName && pastRoutines[selectedRoutineIndex].exercises.length > 0) {
        pastRoutines[selectedRoutineIndex].name = newName;
        renderPastRoutines();
        closeModal(editRoutineModal);
      }
    });

    applyEditedRoutineBtn.addEventListener("click", () => {
      const routine = pastRoutines[selectedRoutineIndex];
      applyRoutine(routine);
    });

    renderPastRoutines();
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'92d57fc7c83f4533',t:'MTc0NDE1NDQ2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>